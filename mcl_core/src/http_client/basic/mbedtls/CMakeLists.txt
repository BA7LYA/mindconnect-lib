FIND_PATH(MBEDTLS_INCLUDE_PATH "mbedtls/version.h")
FIND_LIBRARY(MBEDTLS_LIBRARY "mbedtls")
FIND_LIBRARY(MBEDX509_LIBRARY "mbedx509")

MESSAGE(STATUS "mbedTLS Path: ${MBEDTLS_INCLUDE_PATH}")

GET_FILENAME_COMPONENT(HTTP_CLIENT_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} DIRECTORY)

#MCL needs just these three to be set in PARENT_SCOPE.
SET(MCL_HTTP_CLIENT_INCLUDE_DIRECTORIES ${MBEDTLS_INCLUDE_PATH} "${HTTP_CLIENT_DIRECTORY}" PARENT_SCOPE)
SET(MCL_HTTP_CLIENT_LIBRARIES ${MBEDTLS_LIBRARY} ${MBEDX509_LIBRARY} PARENT_SCOPE)
SET(MCL_HTTP_CLIENT_SOURCES "${CMAKE_CURRENT_SOURCE_DIR}/tls_socket_mbedtls.c" "${HTTP_CLIENT_DIRECTORY}/http_client_basic.c" PARENT_SCOPE)